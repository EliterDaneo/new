import{_ as U,u as V,b as E,k as w,l as k,r as A,A as m,o as a,d as r,e as t,F as g,m as p,t as l,h as f,f as c,v as b,g as h,z as N,B as v,w as T}from"./index-0c1a096b.js";const K={name:"CartComponent",setup(){const n=V(),s=E();w(()=>{n.dispatch("cart/cartCount"),n.dispatch("cart/cartTotal"),n.dispatch("cart/cartWeight")});const y=k(()=>n.getters["cart/getCart"]),e=k(()=>n.state.cart.cartTotal),_=k(()=>n.state.cart.cartWeight);function C(i){n.dispatch("cart/removeCart",i)}const o=A({name:"",phone:"",address:"",provinces:[],province_id:"",cities:[],city_id:"",courier:!1,courier_type:"",cost:!1,costs:"",costService:"",courier_cost:0,courier_service:"",buttonCheckout:!1,grandTotal:0}),d=A({name:!1,phone:!1,address:!1}),I=w(()=>{m.get("/rajaongkir/provinces").then(i=>{o.provinces=i.data.data}).catch(i=>{console.log(i)})});function R(){m.get("/rajaongkir/cities",{params:{province_id:o.province_id}}).then(i=>{o.cities=i.data.data}).catch(i=>{console.log(i)})}function x(){o.courier=!0}function S(){if(_.value==0){alert("silahkan pilih produk terlebih dahulu!");return}m.post("/rajaongkir/checkOngkir",{city_destination:o.city_id,weight:_.value,courier:o.courier_type}).then(i=>{o.cost=!0,o.costs=i.data.data.costs}).catch(i=>{console.log(i)})}function O(){let i=o.costService.split("|");o.courier_cost=i[0],o.courier_service=i[1];const u=n.state.auth.token;m.defaults.headers.common.Authorization="Bearer "+u,m.get("cart/total").then(P=>{o.grandTotal=parseInt(P.data.total)+parseInt(o.courier_cost)}),o.buttonCheckout=!0}function M(){if(o.name&&o.phone&&o.address&&_.value){let i={name:o.name,phone:o.phone,province_id:o.province_id,city_id:o.city_id,courier_type:o.courier_type,courier_service:o.courier_service,courier_cost:o.courier_cost,weight:_.value,address:o.address,grandTotal:o.grandTotal};n.dispatch("cart/checkout",i).then(u=>{s.push({name:"detail_order",params:{snap_token:u[0].snap_token}})}).catch(u=>{console.log(u)})}o.name||(d.name=!0),o.phone||(d.phone=!0),o.address||(d.address=!0)}return{carts:y,cartTotal:e,cartWeight:_,removeCart:C,state:o,validation:d,provinces:I,getCities:R,getCourier:x,getOngkir:S,getCostService:O,checkout:M}}},L={class:"container-fluid mb-5 mt-4"},j={class:"row"},F={class:"col-md-6"},B={class:"card border-0 shadow rounded"},G={class:"card-body"},W=t("h5",null,[t("i",{class:"fa fa-shopping-cart"}),f(" DETAIL PESENAN")],-1),H=t("hr",null,null,-1),J={class:"table",style:{"border-style":"solid !important","border-color":"rgb(198, 206, 214) !important"}},z={class:"b-none",width:"25%"},D={class:"wrapper-image-cart"},q=["src"],Q={class:"b-none",width:"50%"},Y={class:"table-borderless",style:{"font-size":"14px"}},X=t("td",{style:{padding:".20rem"}},"QTY",-1),Z=t("td",{style:{padding:".20rem"}},":",-1),$={style:{padding:".20rem"}},tt={class:"b-none text-right"},ot={class:"m-0 font-weight-bold"},et={class:"m-0"},st={style:{"text-decoration-color":"red"}},it=t("br",null,null,-1),nt={class:"text-right"},at=["onClick"],rt=t("i",{class:"fa fa-trash"},null,-1),lt=[rt],dt={class:"table table-default"},ct=t("td",{class:"set-td text-left",width:"60%"},[t("p",{class:"m-0"},"JUMLAH ")],-1),_t=t("td",{class:"set-td text-right",width:"30%"},"  : Rp.",-1),ht={class:"text-right set-td"},ut={class:"m-0",id:"subtotal"},mt={class:"set-td text-left border-0"},gt={class:"m-0"},pt=t("td",{class:"set-td border-0 text-right"},"  : Rp.",-1),vt={class:"set-td border-0 text-right"},ft={class:"m-0",id:"ongkir-cart"},kt=t("td",{class:"text-left border-0"},[t("p",{class:"font-weight-bold m-0 h5 text-uppercase"},"Grand Total ")],-1),bt=t("td",{class:"border-0 text-right"},"  : Rp.",-1),yt={class:"border-0 text-right"},Ct={class:"font-weight-bold m-0 h5",align:"right"},wt={class:"col-md-6"},At={class:"card border-0 shadow rounded"},Nt={class:"card-body"},Tt=t("h5",null,[t("i",{class:"fa fa-user-circle"}),f(" RINCIAN PENGIRIMAN")],-1),It=t("hr",null,null,-1),Rt={class:"row"},xt={class:"col-md-6"},St={class:"form-group"},Ot=t("label",{class:"font-weight-bold"},"NAMA LENGKAP",-1),Mt={key:0,class:"mt-2 alert alert-danger"},Pt={class:"col-md-6"},Ut={class:"form-group"},Vt=t("label",{class:"font-weight-bold"},"NO. HP / WHATSAPP",-1),Et={key:0,class:"mt-2 alert alert-danger"},Kt={class:"col-md-12"},Lt={class:"form-group"},jt=t("label",{class:"font-weight-bold"},"PROVINSI",-1),Ft=t("option",{value:""},"-- pilih provinsi --",-1),Bt=["value"],Gt={class:"col-md-12"},Wt={class:"form-group"},Ht=t("label",{class:"font-weight-bold"},"KOTA / KABUPATEN",-1),Jt=t("option",{value:""},"-- pilih kota --",-1),zt=["value"],Dt={class:"col-md-12"},qt={key:0,class:"form-group"},Qt=t("label",{class:"font-weight-bold"},"KURIR PENGIRIMAN",-1),Yt=t("br",null,null,-1),Xt={class:"form-check form-check-inline"},Zt=t("label",{class:"form-check-label font-weight-bold mr-4",for:"ongkos_kirim-jne"}," JNE",-1),$t=t("label",{class:"form-check-label font-weight-bold mr-4",for:"ongkos_kirim-jnt"},"TIKI",-1),to=t("label",{class:"form-check-label font-weight-bold",for:"ongkos_kirim-jnt"},"POS",-1),oo={class:"col-md-12"},eo={key:0,class:"form-group"},so=t("hr",null,null,-1),io=t("label",{class:"font-weight-bold"},"SERVICE KURIR",-1),no=t("br",null,null,-1),ao=["id","value"],ro=["for"],lo={class:"col-md-12"},co={class:"form-group"},_o=t("label",{class:"font-weight-bold"},"ALAMAT LENGKAP",-1),ho={key:0,class:"mt-2 alert alert-danger"},uo={key:0,class:"col-md-12"};function mo(n,s,y,e,_,C){return a(),r("div",L,[t("div",j,[t("div",F,[t("div",B,[t("div",G,[W,H,t("table",J,[t("tbody",null,[(a(!0),r(g,null,p(e.carts,o=>(a(),r("tr",{key:o.id,style:{background:"#edf2f7"}},[t("td",z,[t("div",D,[t("img",{src:o.product.image,style:{width:"100%","border-radius":".5rem"}},null,8,q)])]),t("td",Q,[t("h5",null,[t("b",null,l(o.product.title),1)]),t("table",Y,[t("tr",null,[X,Z,t("td",$,[t("b",null,l(o.quantity),1)])])])]),t("td",tt,[t("p",ot,"Rp. "+l(n.moneyFormat(o.price)),1),t("p",et,[t("s",st,"Rp. "+l(n.moneyFormat(o.product.price*o.quantity)),1)]),it,t("div",nt,[t("button",{onClick:T(d=>e.removeCart(o.id),["prevent"]),class:"btn btn-sm btn-danger"},lt,8,at)])])]))),128))])]),t("table",dt,[t("tbody",null,[t("tr",null,[ct,_t,t("td",ht,[t("p",ut,l(n.moneyFormat(e.cartTotal)),1)])]),t("tr",null,[t("td",mt,[t("p",gt,[f("ONGKOS KIRIM ("),t("strong",null,l(e.cartWeight),1),f(" gram)")])]),pt,t("td",vt,[t("p",ft,l(n.moneyFormat(e.state.courier_cost)),1)])]),t("tr",null,[kt,bt,t("td",yt,[t("p",Ct,l(n.moneyFormat(e.state.grandTotal)),1)])])])])])])]),t("div",wt,[t("div",At,[t("div",Nt,[Tt,It,t("div",Rt,[t("div",xt,[t("div",St,[Ot,c(t("input",{type:"text",class:"form-control",id:"nama_lengkap",placeholder:"Nama Lengkap","onUpdate:modelValue":s[0]||(s[0]=o=>e.state.name=o)},null,512),[[b,e.state.name]]),e.validation.name?(a(),r("div",Mt," Masukkan Nama Lengkap ")):h("",!0)])]),t("div",Pt,[t("div",Ut,[Vt,c(t("input",{type:"number",class:"form-control",id:"phone",placeholder:"No. HP / WhatsApp","onUpdate:modelValue":s[1]||(s[1]=o=>e.state.phone=o)},null,512),[[b,e.state.phone]]),e.validation.phone?(a(),r("div",Et," Masukkan No. Telp ")):h("",!0)])]),t("div",Kt,[t("div",Lt,[jt,c(t("select",{class:"form-control","onUpdate:modelValue":s[2]||(s[2]=o=>e.state.province_id=o),onChange:s[3]||(s[3]=(...o)=>e.getCities&&e.getCities(...o))},[Ft,(a(!0),r(g,null,p(e.state.provinces,o=>(a(),r("option",{key:o.id,value:o.province_id},l(o.name),9,Bt))),128))],544),[[N,e.state.province_id]])])]),t("div",Gt,[t("div",Wt,[Ht,c(t("select",{class:"form-control","onUpdate:modelValue":s[4]||(s[4]=o=>e.state.city_id=o),onChange:s[5]||(s[5]=(...o)=>e.getCourier&&e.getCourier(...o))},[Jt,(a(!0),r(g,null,p(e.state.cities,o=>(a(),r("option",{key:o.id,value:o.city_id},l(o.name),9,zt))),128))],544),[[N,e.state.city_id]])])]),t("div",Dt,[e.state.courier?(a(),r("div",qt,[Qt,Yt,t("div",Xt,[c(t("input",{class:"form-check-input select-courier",type:"radio",name:"courier",id:"ongkos_kirim-jne",value:"jne","onUpdate:modelValue":s[6]||(s[6]=o=>e.state.courier_type=o),onChange:s[7]||(s[7]=(...o)=>e.getOngkir&&e.getOngkir(...o))},null,544),[[v,e.state.courier_type]]),Zt,c(t("input",{class:"form-check-input select-courier",type:"radio",name:"courier",id:"ongkos_kirim-tiki",value:"tiki","onUpdate:modelValue":s[8]||(s[8]=o=>e.state.courier_type=o),onChange:s[9]||(s[9]=(...o)=>e.getOngkir&&e.getOngkir(...o))},null,544),[[v,e.state.courier_type]]),$t,c(t("input",{class:"form-check-input select-courier",type:"radio",name:"courier",id:"ongkos_kirim-pos",value:"pos","onUpdate:modelValue":s[10]||(s[10]=o=>e.state.courier_type=o),onChange:s[11]||(s[11]=(...o)=>e.getOngkir&&e.getOngkir(...o))},null,544),[[v,e.state.courier_type]]),to])])):h("",!0)]),t("div",oo,[e.state.cost?(a(),r("div",eo,[so,io,no,(a(!0),r(g,null,p(e.state.costs,o=>(a(),r("div",{key:o.service,class:"form-check form-check-inline"},[c(t("input",{class:"form-check-input",type:"radio",name:"cost",id:o.service,value:o.cost[0].value+"|"+o.service,"onUpdate:modelValue":s[12]||(s[12]=d=>e.state.costService=d),onChange:s[13]||(s[13]=(...d)=>e.getCostService&&e.getCostService(...d))},null,40,ao),[[v,e.state.costService]]),t("label",{class:"form-check-label font-weight-normal mr-5",for:o.service},l(o.service)+" - Rp. "+l(n.moneyFormat(o.cost[0].value)),9,ro)]))),128))])):h("",!0)]),t("div",lo,[t("div",co,[_o,c(t("textarea",{class:"form-control",id:"alamat",rows:"3",placeholder:`Alamat Lengkap

Contoh: Perum. Griya Palem Indah, B-17 Jombang Jawa Timur 61419`,"onUpdate:modelValue":s[14]||(s[14]=o=>e.state.address=o)},null,512),[[b,e.state.address]]),e.validation.address?(a(),r("div",ho," Masukkan Alamat Lengkap ")):h("",!0)])]),e.state.buttonCheckout?(a(),r("div",uo,[t("button",{onClick:s[15]||(s[15]=T((...o)=>e.checkout&&e.checkout(...o),["prevent"])),class:"btn btn-primary btn-lg btn-block"},"CHECKOUT")])):h("",!0)])])])])])])}const po=U(K,[["render",mo]]);export{po as default};
